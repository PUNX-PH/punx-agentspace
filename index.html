<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>D-ID Interactive Agent</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.d-id.com/sdk/v1.0/d-id-sdk.umd.min.js"></script>
  </head>
  <body class="bg-gray-100 flex flex-col items-center justify-center min-h-screen">
    <h1 class="text-2xl font-bold mb-4">D-ID Interactive Agent</h1>

    <!-- Video container for agent -->
    <div id="d-id-video-container" class="w-[360px] h-[480px] bg-black rounded-lg shadow-lg mb-4 overflow-hidden"></div>

    <!-- User Input -->
    <div class="flex gap-2">
      <input
        id="userInput"
        type="text"
        placeholder="Ask something..."
        class="p-2 border rounded w-64"
      />
      <button
        onclick="sendToAgent()"
        class="bg-blue-500 hover:bg-blue-700 text-white px-4 py-2 rounded"
      >
        Send
      </button>
    </div>

    <script>
      let agent;

      async function initAgent() {
        // Initialize D-ID agent
        agent = await DID.createAgent({
          agentId: 'agt_Jd4BnTW4',
          containerId: 'd-id-video-container',
          enableMicrophone: true, // set to false if you only want text input
        });

        await agent.start();
      }

      async function sendToAgent() {
        const input = document.getElementById('userInput').value;
        if (input && agent) {
          agent.sendText(input);
        }
      }

      // Init on page load
      window.onload = initAgent;
    </script>
  </body>
</html>
